<script>
  nodeMap.eachLayer(layer => {
    if ((layer.getIcon && layer.getIcon() == radioIcon) || layer.getLatLngs) {
      layer.remove();
    }
  });
  {{#each radios}}
  {
    {{#if (and lat lon)}}
    const coord = [ {{lat}}, {{lon}} ];
    const mark = L.marker(coord, { icon: radioIcon, title: "{{node}}" });
    nodeMap.addLayer(mark);
    mark.on('click', _ => {
      location.hash = `nodeinfo.${mark.options.title}`;
    });
    {{/if}}
  }
  {{/each}}
  nodeMap.addLayer(L.polyline({{{stringify rf}}}, { color: 'green', weight: 1 }));
  nodeMap.addLayer(L.polyline({{{stringify tun}}}, { color: 'grey', weight: 1.5, dashArray: [ 5, 5 ] }));
</script>
